var splitview=function(){var e,i,t,n,l,u,o,s={},_=0,c={},r=function(){m(),p(),v(),a(),w(),f(),d()},m=function(){e=z("active",!1)},p=function(){i=z("view","")},v=function(){t=x("page_uri","")},a=function(){n=x("admin_uri","/panel/pages/")},w=function(){l=x("site_url","")},f=function(){u=l+n+t+"/edit"},d=function(){o=x("memory",!0)},y=function(){return window.self===window.top?!0:void 0},S=function(e,i){var t=document.createElement("iframe");return t.src=i,document.querySelector(e).appendChild(t),t},q=function(e){iframe=document.querySelector(e),iframe.onload=function(){_++,2==_&&h()}},h=function(){E(".splitview__panel iframe"),E(".splitview__site iframe"),F(".splitview__wrap")},k=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?(T(),L()):setTimeout(k,100)},L=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?setTimeout(L,100):setTimeout(k,100)},g=function(){document.addEventListener("keydown",function(e){e.altKey&&e.keyCode==C()&&(document.querySelector(".splitview__wrap").classList.contains("splitview--hide")?H():J())})},C=function(){if(c.hasOwnProperty("shortcut"))var e=c.shortcut;else var e="s";return e.toUpperCase().charCodeAt(0)},F=function(e){document.querySelector(e).focus()},E=function(e){document.querySelector(e).blur()},b=function(e){document.querySelector(e).classList.add("splitview--hide")},O=function(e){document.querySelector(e).classList.remove("splitview--hide")},W=function(e){document.querySelector(e).classList.add("splitview--full")},I=function(e){document.querySelector(e).classList.remove("splitview--full")},P=function(e,i){i===!0?document.querySelector(e).classList.add("splitview--crop"):document.querySelector(e).classList.remove("splitview--crop")},T=function(){document.querySelector(".splitview__site iframe").contentWindow.location.reload()},A=function(e){localStorage.setItem("splitview.active",e)},D=function(){document.querySelector(".splitview__menu__item--refresh").onclick=function(){T()},document.querySelector(".splitview__menu--site .splitview__menu__item--full").onclick=function(){s.siteFullscreen()},document.querySelector(".splitview__menu--site .splitview__menu__item--columns").onclick=function(){s.siteColumns()},document.querySelector(".splitview__menu--site .splitview__menu__item--link").addEventListener("mouseover",function(){K(".splitview__menu--site .splitview__menu__item--link a",".splitview__site iframe")}),document.querySelector(".splitview__menu--panel .splitview__menu__item--full").onclick=function(){s.panelFullscreen()},document.querySelector(".splitview__menu--panel .splitview__menu__item--columns").onclick=function(){s.panelColumns()},document.querySelector(".splitview__menu--panel .splitview__menu__item--link").addEventListener("mouseover",function(){K(".splitview__menu--panel .splitview__menu__item--link a",".splitview__panel iframe")}),document.querySelector(".splitview__menu--close .splitview__menu__item--close").onclick=function(){J()}},K=function(e,i){var t=document.querySelector(i).contentWindow.location.href;document.querySelector(e).setAttribute("href",t)},M=function(e){return localStorage.getItem("splitview."+e)},U=function(e,i){return localStorage.setItem("splitview."+e,i)},j=function(){B(),G()},x=function(e,i){var t="";return t=c.hasOwnProperty(e)?c[e]:i},z=function(e,i){var t="";return t=c.hasOwnProperty(e)?c[e]:null!==M(e)?M(e):i},B=function(){"true"===e&&H()},G=function(){"panel"===i?s.panelFullscreen():"site"===i&&s.siteFullscreen()},H=function(){O(".splitview__wrap"),O(".splitview__message"),P("body",!0),A(!0)},J=function(){b(".splitview__wrap"),b(".splitview__message"),P("body",!1),A(!1)};return s.panelFullscreen=function(){b(".splitview__menu--site"),b(".splitview__site"),b(".splitview__menu--panel .splitview__menu__item--full"),O(".splitview__menu--panel .splitview__menu__item--columns"),W(".splitview__panel"),U("view","panel")},s.siteFullscreen=function(){b(".splitview__menu--panel"),b(".splitview__panel"),b(".splitview__menu--site .splitview__menu__item--full"),O(".splitview__menu--site .splitview__menu__item--columns"),W(".splitview__site"),U("view","site")},s.panelColumns=function(){O(".splitview__menu--site"),O(".splitview__site"),O(".splitview__menu--panel .splitview__menu__item--full"),b(".splitview__menu--panel .splitview__menu__item--columns"),I(".splitview__panel"),U("view","")},s.siteColumns=function(){O(".splitview__menu--panel"),O(".splitview__panel"),O(".splitview__menu--site .splitview__menu__item--full"),b(".splitview__menu--site .splitview__menu__item--columns"),I(".splitview__site"),U("view","")},s.init=function(e){document.addEventListener("DOMContentLoaded",function(){y()===!0&&(e&&(c=e),r(),console.log(c),S(".splitview__panel",u),S(".splitview__site",z("site_url","")),q(".splitview__panel iframe"),q(".splitview__site iframe"),o===!0&&j(),g(),D(),k())})},s}();
