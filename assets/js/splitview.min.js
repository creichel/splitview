var splitview=function(){var e={},i=0,t={},n=function(){return window.self===window.top?!0:void 0},l=function(e){var i=document.createElement("iframe");return i.src=document.querySelector(e).getAttribute("data-splitview-url"),document.querySelector(e).appendChild(i),i},u=function(e){iframe=document.querySelector(e),iframe.onload=function(){i++,2==i&&s()}},s=function(){m(".splitview__panel iframe"),m(".splitview__site iframe"),p(".splitview__wrap")},o=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?(q(),c()):setTimeout(o,100)},c=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?setTimeout(c,100):setTimeout(o,100)},_=function(){document.addEventListener("keydown",function(e){e.altKey&&e.keyCode==r()&&(document.querySelector(".splitview__wrap").classList.contains("splitview--hide")?d():y())})},r=function(){if(t.hasOwnProperty("shortcut"))var e=t.shortcut;else var e="s";return e.toUpperCase().charCodeAt(0)},p=function(e){document.querySelector(e).focus()},m=function(e){document.querySelector(e).blur()},v=function(e){document.querySelector(e).classList.add("splitview--hide")},a=function(e){document.querySelector(e).classList.remove("splitview--hide")},w=function(e){document.querySelector(e).classList.add("splitview--full")},f=function(e){document.querySelector(e).classList.remove("splitview--full")},d=function(){a(".splitview__wrap"),a(".splitview__message"),S("body",!0),h(!0)},y=function(){v(".splitview__wrap"),v(".splitview__message"),S("body",!1),h(!1)},S=function(e,i){i===!0?document.querySelector(e).classList.add("splitview--crop"):document.querySelector(e).classList.remove("splitview--crop")},q=function(){document.querySelector(".splitview__site iframe").contentWindow.location.reload()},h=function(e){localStorage.setItem("splitview.active",e)},L=function(){document.querySelector(".splitview__menu__item--refresh").onclick=function(){q()},document.querySelector(".splitview__menu--site .splitview__menu__item--full").onclick=function(){e.siteFullscreen()},document.querySelector(".splitview__menu--site .splitview__menu__item--columns").onclick=function(){a(".splitview__menu--panel"),a(".splitview__panel"),a(".splitview__menu--site .splitview__menu__item--full"),v(".splitview__menu--site .splitview__menu__item--columns"),f(".splitview__site")},document.querySelector(".splitview__menu--panel .splitview__menu__item--full").onclick=function(){e.panelFullscreen()},document.querySelector(".splitview__menu--panel .splitview__menu__item--columns").onclick=function(){e.panelColumns()},document.querySelector(".splitview__menu--close .splitview__menu__item--close").onclick=function(){y()}},g=function(e){return localStorage.getItem("splitview."+e)},k=function(e,i){return localStorage.setItem("splitview."+e,i)},C=function(){F(),b()},F=function(){if(t.hasOwnProperty("active"))var e=t.active;else var e="true"===g("active")?!0:!1;e===!0&&d()},b=function(){if(t.hasOwnProperty("view"))var i=t.view;else if(null!==g("view"))var i=g("view");"panel"===i?e.panelFullscreen():"site"===i&&e.siteFullscreen()};return e.panelFullscreen=function(){v(".splitview__menu--site"),v(".splitview__site"),v(".splitview__menu--panel .splitview__menu__item--full"),a(".splitview__menu--panel .splitview__menu__item--columns"),w(".splitview__panel"),k("view","panel")},e.siteFullscreen=function(){v(".splitview__menu--panel"),v(".splitview__panel"),v(".splitview__menu--site .splitview__menu__item--full"),a(".splitview__menu--site .splitview__menu__item--columns"),w(".splitview__site"),k("view","site")},e.panelColumns=function(){a(".splitview__menu--site"),a(".splitview__site"),a(".splitview__menu--panel .splitview__menu__item--full"),v(".splitview__menu--panel .splitview__menu__item--columns"),f(".splitview__panel")},e.init=function(e){document.addEventListener("DOMContentLoaded",function(){n()===!0&&(t=e,l(".splitview__panel"),l(".splitview__site"),u(".splitview__panel iframe"),u(".splitview__site iframe"),C(),_(),L(),o())})},e}();
