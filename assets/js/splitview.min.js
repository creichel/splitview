var splitview=function(){var e,i,t,n,l,u,o,s,_={},c=0,r={},m=function(){p(),v(),a(),w(),f(),d(),y(),S()},p=function(){e=H("active",!1)},v=function(){i=H("view","")},a=function(){t=G("page_uri","")},w=function(){n=G("admin_uri","/panel/pages/")},f=function(){l=G("site_url","")},d=function(){u=l+n+t+"/edit"},y=function(){o=G("memory",!0)},S=function(){s=G("time","fast"),s="slow"===s?1e3:100},q=function(){return window.self===window.top?!0:void 0},h=function(e,i){var t=document.createElement("iframe");return t.src=i,document.querySelector(e).appendChild(t),t},k=function(e){iframe=document.querySelector(e),iframe.onload=function(){c++,2==c&&g()}},g=function(){O(".splitview__panel iframe"),O(".splitview__site iframe"),b(".splitview__wrap")},L=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?(D(),C()):setTimeout(L,s)},C=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?setTimeout(C,s):setTimeout(L,s)},E=function(){document.addEventListener("keydown",function(e){e.altKey&&e.keyCode==F()&&(document.querySelector(".splitview__wrap").classList.contains("splitview--hide")?Q():R())})},F=function(){if(r.hasOwnProperty("shortcut"))var e=r.shortcut;else var e="s";return e.toUpperCase().charCodeAt(0)},b=function(e){document.querySelector(e).focus()},O=function(e){document.querySelector(e).blur()},W=function(e){document.querySelector(e).classList.add("splitview--hide")},A=function(e){document.querySelector(e).classList.remove("splitview--hide")},I=function(e){document.querySelector(e).classList.add("splitview--full")},P=function(e){document.querySelector(e).classList.remove("splitview--full")},T=function(e,i){i===!0?document.querySelector(e).classList.add("splitview--crop"):document.querySelector(e).classList.remove("splitview--crop")},D=function(){document.querySelector(".splitview__site iframe").contentWindow.location.reload()},K=function(e){localStorage.setItem("splitview.active",e)},M=function(){document.querySelector(".splitview__menu__item--refresh").onclick=function(){D()},document.querySelector(".splitview__menu--site .splitview__menu__item--full").onclick=function(){_.siteFullscreen()},document.querySelector(".splitview__menu--site .splitview__menu__item--columns").onclick=function(){_.siteColumns()},document.querySelector(".splitview__menu--site .splitview__menu__item--link").addEventListener("mouseover",function(){U(".splitview__menu--site .splitview__menu__item--link a",".splitview__site iframe")}),document.querySelector(".splitview__menu--panel .splitview__menu__item--full").onclick=function(){_.panelFullscreen()},document.querySelector(".splitview__menu--panel .splitview__menu__item--columns").onclick=function(){_.panelColumns()},document.querySelector(".splitview__menu--panel .splitview__menu__item--link").addEventListener("mouseover",function(){U(".splitview__menu--panel .splitview__menu__item--link a",".splitview__panel iframe")}),document.querySelector(".splitview__menu--site .splitview__menu__item--link a").addEventListener("click",function(e){e.preventDefault(),j(this)}),document.querySelector(".splitview__menu--close .splitview__menu__item--close").onclick=function(){R()}},U=function(e,i){var t=document.querySelector(i).contentWindow.location.href;document.querySelector(e).setAttribute("href",t)},j=function(e){R(),window.location.href=e.getAttribute("href")},x=function(e){return localStorage.getItem("splitview."+e)},z=function(e,i){return localStorage.setItem("splitview."+e,i)},B=function(){J(),N()},G=function(e,i){var t="";return t=r.hasOwnProperty(e)?r[e]:i},H=function(e,i){var t="";return t=r.hasOwnProperty(e)?r[e]:null!==x(e)?x(e):i},J=function(){"true"===e&&Q()},N=function(){"panel"===i?_.panelFullscreen():"site"===i&&_.siteFullscreen()},Q=function(){A(".splitview__wrap"),A(".splitview__message"),T("body",!0),K(!0)},R=function(){W(".splitview__wrap"),W(".splitview__message"),T("body",!1),K(!1)};return _.panelFullscreen=function(){W(".splitview__menu--site"),W(".splitview__site"),W(".splitview__menu--panel .splitview__menu__item--full"),A(".splitview__menu--panel .splitview__menu__item--columns"),I(".splitview__panel"),z("view","panel")},_.siteFullscreen=function(){W(".splitview__menu--panel"),W(".splitview__panel"),W(".splitview__menu--site .splitview__menu__item--full"),A(".splitview__menu--site .splitview__menu__item--columns"),I(".splitview__site"),z("view","site")},_.panelColumns=function(){A(".splitview__menu--site"),A(".splitview__site"),A(".splitview__menu--panel .splitview__menu__item--full"),W(".splitview__menu--panel .splitview__menu__item--columns"),P(".splitview__panel"),z("view","")},_.siteColumns=function(){A(".splitview__menu--panel"),A(".splitview__panel"),A(".splitview__menu--site .splitview__menu__item--full"),W(".splitview__menu--site .splitview__menu__item--columns"),P(".splitview__site"),z("view","")},_.init=function(e){document.addEventListener("DOMContentLoaded",function(){q()===!0&&(e&&(r=e),m(),console.log(r),h(".splitview__panel",u),h(".splitview__site",H("site_url","")+"/"+H("page_uri","")),k(".splitview__panel iframe"),k(".splitview__site iframe"),o===!0&&B(),E(),M(),L())})},_}();
