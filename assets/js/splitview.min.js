var splitview=function(){var e,i,t,n,l,u,o,s,_={},c=0,r={},m=function(){p(),v(),a(),w(),f(),d(),y(),S()},p=function(){e=G("active",!1)},v=function(){i=G("view","")},a=function(){t=B("page_uri","")},w=function(){n=B("admin_uri","/panel/pages/")},f=function(){l=B("site_url","")},d=function(){u=l+n+t+"/edit"},y=function(){o=B("memory",!0)},S=function(){s=B("time","fast"),s="slow"===s?1e3:100,console.log(s)},q=function(){return window.self===window.top?!0:void 0},g=function(e,i){var t=document.createElement("iframe");return t.src=i,document.querySelector(e).appendChild(t),t},h=function(e){iframe=document.querySelector(e),iframe.onload=function(){c++,2==c&&k()}},k=function(){O(".splitview__panel iframe"),O(".splitview__site iframe"),b(".splitview__wrap")},L=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?(D(),C()):setTimeout(L,s)},C=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?setTimeout(C,s):setTimeout(L,s)},F=function(){document.addEventListener("keydown",function(e){e.altKey&&e.keyCode==E()&&(document.querySelector(".splitview__wrap").classList.contains("splitview--hide")?N():Q())})},E=function(){if(r.hasOwnProperty("shortcut"))var e=r.shortcut;else var e="s";return e.toUpperCase().charCodeAt(0)},b=function(e){document.querySelector(e).focus()},O=function(e){document.querySelector(e).blur()},W=function(e){document.querySelector(e).classList.add("splitview--hide")},I=function(e){document.querySelector(e).classList.remove("splitview--hide")},P=function(e){document.querySelector(e).classList.add("splitview--full")},T=function(e){document.querySelector(e).classList.remove("splitview--full")},A=function(e,i){i===!0?document.querySelector(e).classList.add("splitview--crop"):document.querySelector(e).classList.remove("splitview--crop")},D=function(){document.querySelector(".splitview__site iframe").contentWindow.location.reload()},K=function(e){localStorage.setItem("splitview.active",e)},M=function(){document.querySelector(".splitview__menu__item--refresh").onclick=function(){D()},document.querySelector(".splitview__menu--site .splitview__menu__item--full").onclick=function(){_.siteFullscreen()},document.querySelector(".splitview__menu--site .splitview__menu__item--columns").onclick=function(){_.siteColumns()},document.querySelector(".splitview__menu--site .splitview__menu__item--link").addEventListener("mouseover",function(){U(".splitview__menu--site .splitview__menu__item--link a",".splitview__site iframe")}),document.querySelector(".splitview__menu--panel .splitview__menu__item--full").onclick=function(){_.panelFullscreen()},document.querySelector(".splitview__menu--panel .splitview__menu__item--columns").onclick=function(){_.panelColumns()},document.querySelector(".splitview__menu--panel .splitview__menu__item--link").addEventListener("mouseover",function(){U(".splitview__menu--panel .splitview__menu__item--link a",".splitview__panel iframe")}),document.querySelector(".splitview__menu--close .splitview__menu__item--close").onclick=function(){Q()}},U=function(e,i){var t=document.querySelector(i).contentWindow.location.href;document.querySelector(e).setAttribute("href",t)},j=function(e){return localStorage.getItem("splitview."+e)},x=function(e,i){return localStorage.setItem("splitview."+e,i)},z=function(){H(),J()},B=function(e,i){var t="";return t=r.hasOwnProperty(e)?r[e]:i},G=function(e,i){var t="";return t=r.hasOwnProperty(e)?r[e]:null!==j(e)?j(e):i},H=function(){"true"===e&&N()},J=function(){"panel"===i?_.panelFullscreen():"site"===i&&_.siteFullscreen()},N=function(){I(".splitview__wrap"),I(".splitview__message"),A("body",!0),K(!0)},Q=function(){W(".splitview__wrap"),W(".splitview__message"),A("body",!1),K(!1)};return _.panelFullscreen=function(){W(".splitview__menu--site"),W(".splitview__site"),W(".splitview__menu--panel .splitview__menu__item--full"),I(".splitview__menu--panel .splitview__menu__item--columns"),P(".splitview__panel"),x("view","panel")},_.siteFullscreen=function(){W(".splitview__menu--panel"),W(".splitview__panel"),W(".splitview__menu--site .splitview__menu__item--full"),I(".splitview__menu--site .splitview__menu__item--columns"),P(".splitview__site"),x("view","site")},_.panelColumns=function(){I(".splitview__menu--site"),I(".splitview__site"),I(".splitview__menu--panel .splitview__menu__item--full"),W(".splitview__menu--panel .splitview__menu__item--columns"),T(".splitview__panel"),x("view","")},_.siteColumns=function(){I(".splitview__menu--panel"),I(".splitview__panel"),I(".splitview__menu--site .splitview__menu__item--full"),W(".splitview__menu--site .splitview__menu__item--columns"),T(".splitview__site"),x("view","")},_.init=function(e){document.addEventListener("DOMContentLoaded",function(){q()===!0&&(e&&(r=e),m(),console.log(r),g(".splitview__panel",u),g(".splitview__site",G("site_url","")+"/"+G("page_uri","")),h(".splitview__panel iframe"),h(".splitview__site iframe"),o===!0&&z(),F(),M(),L())})},_}();
