var splitview=function(){var e,i,t,n,l,u,o,s,c={},_=0,r={},m=function(){p(),v(),a(),w(),f(),d(),y(),S()},p=function(){e=N("mode","edit")},v=function(){i=N("active",!1)},a=function(){t=N("view","")},w=function(){n=J("page_uri","")},f=function(){l=J("admin_uri","/panel/pages/")},d=function(){u=J("site_url","")},y=function(){o=u+l+n+"/"+e},S=function(){s=J("memory",!0)},q=function(){return window.self===window.top?!0:void 0},h=function(e,i){var t=document.createElement("iframe");return t.src=i,document.querySelector(e).appendChild(t),t},g=function(e){iframe=document.querySelector(e),iframe.onload=function(){_++,2==_&&k()}},k=function(){O(".splitview__panel iframe"),O(".splitview__site iframe"),b(".splitview__wrap")},L=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?(U(),C()):setTimeout(L,100)},C=function(){var e=document.querySelector(".splitview__panel iframe").contentWindow.document.querySelector(".message-content");e?setTimeout(C,100):setTimeout(L,100)},F=function(){var i=document.querySelector(".splitview__panel iframe").contentWindow.location.href,t=i.split("/"),n=t[t.length-1],o=t[t.length-3];i.includes(u+l)===!0&&("edit"===n&&"file"==o||"files"==n?e="files":"edit"===n&&(e="edit"),G("mode",e)),setTimeout(F,100)},E=function(){document.addEventListener("keydown",function(e){e.altKey&&e.keyCode==W()&&(document.querySelector(".splitview__wrap").classList.contains("splitview--hide")?D():K())})},W=function(){if(r.hasOwnProperty("shortcut"))var e=r.shortcut;else var e="s";return e.toUpperCase().charCodeAt(0)},b=function(e){document.querySelector(e).focus()},O=function(e){document.querySelector(e).blur()},T=function(e){document.querySelector(e).classList.add("splitview--hide")},I=function(e){document.querySelector(e).classList.remove("splitview--hide")},P=function(e){document.querySelector(e).classList.add("splitview--full")},A=function(e){document.querySelector(e).classList.remove("splitview--full")},D=function(){I(".splitview__wrap"),I(".splitview__message"),M("body",!0),j(!0)},K=function(){T(".splitview__wrap"),T(".splitview__message"),M("body",!1),j(!1)},M=function(e,i){i===!0?document.querySelector(e).classList.add("splitview--crop"):document.querySelector(e).classList.remove("splitview--crop")},U=function(){document.querySelector(".splitview__site iframe").contentWindow.location.reload()},j=function(e){localStorage.setItem("splitview.active",e)},x=function(){document.querySelector(".splitview__menu__item--refresh").onclick=function(){U()},document.querySelector(".splitview__menu--site .splitview__menu__item--full").onclick=function(){c.siteFullscreen()},document.querySelector(".splitview__menu--site .splitview__menu__item--columns").onclick=function(){c.siteColumns()},document.querySelector(".splitview__menu--site .splitview__menu__item--link").addEventListener("mouseover",function(){z(".splitview__menu--site .splitview__menu__item--link a",".splitview__site iframe")}),document.querySelector(".splitview__menu--panel .splitview__menu__item--full").onclick=function(){c.panelFullscreen()},document.querySelector(".splitview__menu--panel .splitview__menu__item--columns").onclick=function(){c.panelColumns()},document.querySelector(".splitview__menu--panel .splitview__menu__item--link").addEventListener("mouseover",function(){z(".splitview__menu--panel .splitview__menu__item--link a",".splitview__panel iframe")}),document.querySelector(".splitview__menu--close .splitview__menu__item--close").onclick=function(){K()}},z=function(e,i){var t=document.querySelector(i).contentWindow.location.href;document.querySelector(e).setAttribute("href",t)},B=function(e){return localStorage.getItem("splitview."+e)},G=function(e,i){return localStorage.setItem("splitview."+e,i)},H=function(){Q(),R()},J=function(e,i){var t="";return t=r.hasOwnProperty(e)?r[e]:i},N=function(e,i){var t="";return t=r.hasOwnProperty(e)?r[e]:null!==B(e)?B(e):i},Q=function(){"true"===i&&D()},R=function(){"panel"===t?c.panelFullscreen():"site"===t&&c.siteFullscreen()};return c.panelFullscreen=function(){T(".splitview__menu--site"),T(".splitview__site"),T(".splitview__menu--panel .splitview__menu__item--full"),I(".splitview__menu--panel .splitview__menu__item--columns"),P(".splitview__panel"),G("view","panel")},c.siteFullscreen=function(){T(".splitview__menu--panel"),T(".splitview__panel"),T(".splitview__menu--site .splitview__menu__item--full"),I(".splitview__menu--site .splitview__menu__item--columns"),P(".splitview__site"),G("view","site")},c.panelColumns=function(){I(".splitview__menu--site"),I(".splitview__site"),I(".splitview__menu--panel .splitview__menu__item--full"),T(".splitview__menu--panel .splitview__menu__item--columns"),A(".splitview__panel"),G("view","")},c.siteColumns=function(){I(".splitview__menu--panel"),I(".splitview__panel"),I(".splitview__menu--site .splitview__menu__item--full"),T(".splitview__menu--site .splitview__menu__item--columns"),A(".splitview__site"),G("view","")},c.init=function(e){document.addEventListener("DOMContentLoaded",function(){q()===!0&&(e&&(r=e),m(),console.log(r),h(".splitview__panel",o),h(".splitview__site",N("site_url","")),g(".splitview__panel iframe"),g(".splitview__site iframe"),s===!0&&H(),E(),x(),L(),F())})},c}();
