var splitview=function(){function e(){var e=new RegExp(/^.*\//);return e.exec(window.location.href)}var t,i,n,o,l,c,r,s,u,a,d={},v={},p=0,w=function(){t=P("root_url",e()[0]),n=P("page_uri",""),i=P("admin_uri","panel/pages/"),o=t+"/"+i+n+"/edit",r=P("time_refresh",100),l=P("memory",!0),a=P("debug",!1),c=x("orientation","columns"),s=x("view",""),u=x("visible",!1)};d.init=function(e){document.addEventListener("DOMContentLoaded",function(){O()===!0&&(e&&(v=e),w(),W(".splitview--panel",o),W(".splitview--site",t+"/"+n),A(".splitview--panel iframe"),A(".splitview--site iframe"),a===!0&&(console.log("Options JS:"),console.log(v)),l===!0&&m(),f(),U(),R())})};var m=function(){("true"===u||u===!0)&&q(),"columns"===c?_():S(),"panel"===s?k():"site"===s&&b()},f=function(){document.addEventListener("keydown",function(e){e.altKey&&e.keyCode==C()&&(document.querySelector(".splitview").classList.contains("splitview--hide")?q():L())}),document.querySelector(".splitview--panel .splitview__item--back").addEventListener("click",function(){h()}),document.querySelector(".splitview--site .splitview__item--back").addEventListener("click",function(){h()}),document.querySelector(".splitview--panel .splitview__item--full").addEventListener("click",function(){k()}),document.querySelector(".splitview--site .splitview__item--full").addEventListener("click",function(){b()}),document.querySelector(".splitview__item--site a").addEventListener("click",function(e){y(this,e)}),document.querySelector(".splitview--meta .splitview__item--columns").addEventListener("click",function(){_()}),document.querySelector(".splitview--meta .splitview__item--rows").addEventListener("click",function(){S()}),document.querySelector(".splitview__item--refresh").addEventListener("click",function(){J()}),document.querySelector(".splitview__item--close").addEventListener("click",function(){L()})},y=function(e,t){t.preventDefault(),url=e.getAttribute("href"),g("visible","false"),1==t.which?window.open(url,"_self"):2==t.which&&window.open(url,"_blank")},_=function(){document.querySelector(".splitview").classList.add("splitview--columns"),document.querySelector(".splitview").classList.remove("splitview--rows"),g("orientation","columns")},S=function(){document.querySelector(".splitview").classList.add("splitview--rows"),document.querySelector(".splitview").classList.remove("splitview--columns"),g("orientation","rows")},q=function(){document.querySelector(".splitview").classList.remove("splitview--hide"),K("body"),g("visible","true")},L=function(){document.querySelector(".splitview").classList.add("splitview--hide"),M("body"),g("visible","false")},h=function(){document.querySelector(".splitview").classList.remove("splitview__full--panel","splitview__full--site"),g("view","")},k=function(){document.querySelector(".splitview").classList.add("splitview__full--panel"),g("view","panel")},b=function(){document.querySelector(".splitview").classList.add("splitview__full--site"),g("view","site")},g=function(e,t){E(e)!==t&&(a===!0&&console.log("splitview."+e+": "+t),localStorage.setItem("splitview."+e,t))},E=function(e){return localStorage.getItem("splitview."+e)},C=function(){if(v.hasOwnProperty("shortcut"))var e=v.shortcut;else var e="s";return e.toUpperCase().charCodeAt(0)},O=function(){return window.self===window.top?!0:void 0},W=function(e,t){var i=document.createElement("iframe");return i.src=t,document.querySelector(e).appendChild(i),i},A=function(e){iframe=document.querySelector(e),iframe.onload=function(){p++,2==p&&T()}},T=function(){I(".splitview--panel iframe"),I(".splitview--site iframe"),D(".splitview")},P=function(e,t){var i="";return i=v.hasOwnProperty(e)?v[e]:t},x=function(e,t){var i="";return i=v.hasOwnProperty(e)?v[e]:null!==E(e)?E(e):t},D=function(e){document.querySelector(e).focus()},I=function(e){document.querySelector(e).blur()},J=function(){document.querySelector(".splitview--site iframe").contentWindow.location.reload()},K=function(e){document.querySelector(e).classList.add("splitview--crop")},M=function(e){document.querySelector(e).classList.remove("splitview--crop")},R=function(){var e=document.querySelector(".splitview--panel iframe").contentWindow.location.href,t=document.querySelector(".splitview--site iframe").contentWindow.location.href;document.querySelector(".splitview__item--panel .splitview__link").setAttribute("href",e),document.querySelector(".splitview__item--site .splitview__link").setAttribute("href",t),setTimeout(R,1e3)},U=function(){var e=document.querySelector(".splitview--panel iframe").contentWindow.document.querySelector(".message-content");e?(J(),j()):setTimeout(U,r)},j=function(){var e=document.querySelector(".splitview--panel iframe").contentWindow.document.querySelector(".message-content");e?setTimeout(j,r):setTimeout(U,r)};return d}();
